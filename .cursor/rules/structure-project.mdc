---
description: Cấu trúc dự án thực tế và quy tắc tổ chức thư mục cho DTU Support FE
globs:
  - "**/*.vue"
  - "**/*.ts"
  - "**/*.js"
  - "**/*.mdc"
  - "**/*.yml"
alwaysApply: true
---

# DTU Support FE - Project Structure & Organization

## Mục tiêu
- Chuẩn hóa cấu trúc thư mục dự án thực tế, vai trò từng phần, và quy tắc phát triển
- Giúp AI/Dev đọc nhanh, thống nhất cách tổ chức mã nguồn, tránh rối
- Bám theo chuẩn Nuxt 4, Tailwind CSS 4, shadcn-vue và các quy ước nội bộ

---

## Cấu trúc dự án thực tế

### Sơ đồ cấu trúc hiện tại
```
DTU-SUPPORT-FE/
├── .nuxt/                          # Build artifacts (auto-generated)
├── .output/                        # Build output (auto-generated)
├── .cursor/                        # Cursor AI rules
│   └── rules/
│       ├── overview.mdc            # Project overview & rules
│       └── structure-project.mdc   # This file
├── app/                            # Nuxt 4 app directory (main source)
│   ├── assets/                     # Local assets (bundled)
│   │   ├── css/
│   │   │   └── tailwind.css        # CSS variables, themes, utilities
│   │   └── images/
│   │       └── logo-dtu.png        # DTU logo
│   ├── components/                 # Vue components (auto-import)
│   │   ├── common/                 # Shared components
│   │   │   ├── Header.vue          # Main navigation header
│   │   │   ├── Footer.vue          # Site footer
│   │   │   ├── Hero.vue            # Hero section component
│   │   │   ├── LocaleSwitcher.vue  # Language switcher
│   │   │   └── ScrollToTop.vue     # Scroll to top button
│   │   ├── home/                   # Homepage-specific components
│   │   │   ├── AboutUs.vue         # About us section
│   │   │   ├── FAQ.vue             # FAQ accordion
│   │   │   ├── Testimonials.vue    # Student testimonials
│   │   │   └── WhatWeDo.vue        # What we do section
│   │   ├── tools/                  # Tools page components
│   │   │   ├── BenefitsSection.vue # Benefits of tools
│   │   │   ├── ToolsCTA.vue        # Call-to-action
│   │   │   └── ToolsGrid.vue       # Tools grid layout
│   │   └── ui/                     # shadcn-vue components
│   │       ├── accordion/          # Accordion components
│   │       │   ├── Accordion.vue
│   │       │   ├── AccordionContent.vue
│   │       │   ├── AccordionItem.vue
│   │       │   ├── AccordionTrigger.vue
│   │       │   └── index.ts
│   │       ├── button/             # Button components
│   │       │   ├── Button.vue
│   │       │   └── index.ts
│   │       ├── card/               # Card components
│   │       │   ├── Card.vue
│   │       │   ├── CardAction.vue
│   │       │   ├── CardContent.vue
│   │       │   ├── CardDescription.vue
│   │       │   ├── CardFooter.vue
│   │       │   ├── CardHeader.vue
│   │       │   ├── CardTitle.vue
│   │       │   └── index.ts
│   │       ├── dropdown-menu/      # Dropdown menu components
│   │       │   ├── DropdownMenu.vue
│   │       │   ├── DropdownMenuCheckboxItem.vue
│   │       │   ├── DropdownMenuContent.vue
│   │       │   ├── DropdownMenuGroup.vue
│   │       │   ├── DropdownMenuItem.vue
│   │       │   ├── DropdownMenuLabel.vue
│   │       │   ├── DropdownMenuRadioGroup.vue
│   │       │   ├── DropdownMenuRadioItem.vue
│   │       │   ├── DropdownMenuSeparator.vue
│   │       │   ├── DropdownMenuShortcut.vue
│   │       │   ├── DropdownMenuSub.vue
│   │       │   ├── DropdownMenuSubContent.vue
│   │       │   ├── DropdownMenuSubTrigger.vue
│   │       │   ├── DropdownMenuTrigger.vue
│   │       │   └── index.ts
│   │       ├── input/              # Input components
│   │       │   ├── Input.vue
│   │       │   └── index.ts
│   │       └── theme-selector/     # Theme selector components
│   │           ├── Theme.vue
│   │           └── index.ts
│   ├── composables/                # Auto-import composables
│   │   ├── useLocaleLogic.ts       # Locale switching logic
│   │   └── useThemeLogic.ts        # Theme switching logic
│   ├── constants/                  # Application constants
│   │   ├── common/
│   │   │   └── ui.ts               # THEMES, LOCALES constants
│   │   └── features/
│   │       └── home.ts             # HOME_SECTIONS, NAV_ITEMS
│   ├── conventions/                # Project conventions
│   │   └── naming.md               # Naming conventions
│   ├── lib/                        # Internal utilities
│   │   └── utils.ts                # cn() function for class merging
│   ├── pages/                      # File-based routing
│   │   ├── index.vue               # Homepage
│   │   └── tools.vue               # Tools page
│   ├── plugins/                    # Nuxt plugins
│   │   └── ssr-width.ts            # SSR width detection
│   ├── types/                      # TypeScript definitions
│   │   └── common.ts               # ThemeValue, LocaleCode, etc.
│   ├── router.options.ts           # Router configuration
│   └── app.vue                     # Root app shell
├── i18n/                           # Internationalization
│   └── locales/
│       ├── common/                 # Common translations
│       │   ├── en.yml
│       │   ├── vi.yml
│       │   └── ja.yml
│       ├── home/                   # Homepage translations
│       │   ├── en.yml
│       │   ├── vi.yml
│       │   └── ja.yml
│       └── tools/                  # Tools page translations
│           ├── en.yml
│           ├── vi.yml
│           └── ja.yml
├── public/                         # Static assets (not bundled)
│   ├── favicon.ico
│   └── robots.txt
├── node_modules/                   # Dependencies
├── .env                            # Environment variables
├── .gitignore
├── .nuxtignore
├── nuxt.config.ts                  # Nuxt configuration
├── tailwind.config.js              # Tailwind configuration
├── package.json                    # Dependencies & scripts
├── tsconfig.json                   # TypeScript configuration
├── components.json                 # shadcn-vue configuration
├── README.md
└── yarn.lock
```

---

## Vai trò chi tiết theo thư mục

### `app/` - Nuxt 4 App Directory
- **Runtime**: Cho client/server của Nuxt (auto-import components, composables, utils)
- **Organization**: Tổ chức theo feature/domain; tránh nhúng nghiệp vụ phức tạp vào components
- **Auto-import**: Components, composables, utils được auto-import theo cấu hình

### `app/assets/` - Local Assets (Bundled)
- **Purpose**: Asset import vào bundle (fonts, css nội bộ, icons nhỏ)
- **Content**:
  - `css/tailwind.css` - CSS variables, themes, utilities
  - `images/logo-dtu.png` - DTU logo
- **Rule**: Không chứa ảnh tĩnh nặng (đặt vào `public/`)

### `app/components/` - Vue Components (Auto-import)
- **Structure**: Tổ chức theo feature/domain
- **Naming**: PascalCase; props rõ ràng; không side-effects
- **Organization**:
  - `common/` - Shared components (Header, Footer, Hero, etc.)
  - `home/` - Homepage-specific components (AboutUs, FAQ, Testimonials, etc.)
  - `tools/` - Tools page components (BenefitsSection, ToolsCTA, etc.)
  - `ui/` - shadcn-vue components (accordion, button, card, etc.)

### `app/composables/` - Auto-import Composables
- **Naming**: `useXxx` pattern
- **Current**: `useLocaleLogic.ts`, `useThemeLogic.ts`
- **Rule**: Tránh phụ thuộc thứ tự plugins

### `app/constants/` - Application Constants
- **Structure**: Tổ chức theo domain
- **Content**:
  - `common/ui.ts` - THEMES, LOCALES constants
  - `features/home.ts` - HOME_SECTIONS, NAV_ITEMS
- **Naming**: UPPER_SNAKE_CASE

### `app/lib/` - Internal Utilities
- **Purpose**: Tiện ích nội bộ mức thư viện
- **Content**: `utils.ts` - `cn()` function for class merging
- **Rule**: Không phụ thuộc Nuxt runtime, có thể tái sử dụng rộng rãi

### `app/pages/` - File-based Routing
- **Current**: `index.vue` (homepage), `tools.vue` (tools page)
- **Rule**: Tối ưu lazy-load, split-chunk theo route khi cần

### `app/plugins/` - Nuxt Plugins
- **Current**: `ssr-width.ts` - SSR width detection
- **Rule**: Dùng tiền tố số cho thứ tự nạp (`01.`, `02.`, `03.`)
- **Environment**: `.client.ts` cho client-only; `.server.ts` cho server-only

### `app/types/` - TypeScript Definitions
- **Content**: `common.ts` - ThemeValue, LocaleCode, NavItem interfaces
- **Rule**: PascalCase cho interfaces, kebab-case cho files

### `i18n/` - Internationalization
- **Structure**: Tổ chức theo feature
- **Languages**: Vietnamese (vi), English (en), Japanese (ja)
- **Content**: Common, home, tools translations

### `public/` - Static Assets (Not Bundled)
- **Content**: `favicon.ico`, `robots.txt`
- **Rule**: File tĩnh phục vụ trực tiếp, không qua bundler

---

## Component Organization Rules

### Feature-based Organization
```

app/components/
├── common/               # Shared across features
│   ├── Header.vue        # Main navigation
│   ├── Footer.vue        # Site footer
│   ├── Hero.vue          # Hero section
│   ├── LocaleSwitcher.vue # Language switcher
│   └── ScrollToTop.vue   # Scroll to top
├── home/                 # Homepage feature
│   ├── AboutUs.vue       # About us section
│   ├── FAQ.vue           # FAQ accordion
│   ├── Testimonials.vue  # Student testimonials
│   └── WhatWeDo.vue      # What we do section
├── tools/                # Tools page feature
│   ├── BenefitsSection.vue # Benefits of tools
│   ├── ToolsCTA.vue      # Call-to-action
│   └── ToolsGrid.vue     # Tools grid layout
└── ui/                   # shadcn-vue components
    ├── accordion/        # Accordion components
    ├── button/           # Button components
    ├── card/             # Card components
    ├── dropdown-menu/    # Dropdown menu components
    ├── input/            # Input components
    └── theme-selector/   # Theme selector components
```

### Component Naming Rules
- **Components**: PascalCase (`UserProfile.vue`, `GpaCalculator.vue`)
- **Files**: kebab-case (`user-profile.vue`, `gpa-calculator.ts`)
- **Props**: camelCase (`userId`, `isLoading`)
- **Events**: kebab-case (`@user-updated`, `@form-submitted`)

---

## Plugin System

### Plugin Structure
```ts
// app/plugins/ssr-width.ts
export default defineNuxtPlugin((nuxtApp) => {
  // Plugin logic
})
```

### Plugin Rules
- **Auto-register**: Chỉ file top-level trong `app/plugins/` được tự động nạp
- **Subfolder**: Không auto; muốn nạp phải khai báo trong `nuxt.config.ts > plugins`
- **Order**: Dùng tiền tố số (`01.`, `02.`, `03.`) để kiểm soát phụ thuộc
- **Environment**: `.client.ts` cho client-only; `.server.ts` cho server-only

### Plugin Configuration
```ts
// nuxt.config.ts
export default defineNuxtConfig({
  plugins: [
    '~/plugins/ssr-width',
    // Subfolder plugins need explicit registration
    '~/plugins/auth/session',
    '~/plugins/i18n/setup',
  ],
})
```

---

## Styling System

### Tailwind CSS 4 Configuration
- **Config**: `tailwind.config.js` - Theme, colors, animations
- **CSS**: `app/assets/css/tailwind.css` - CSS variables, themes, utilities
- **Dark Mode**: Class-based (`darkMode: ['class']`)
- **Safelist**: `['dark']` trong Tailwind config

### Color System
- **Primary**: DTU Red (`350 85% 42%` / `#C8102E`)
- **Accent**: (`352 77% 57%` / `#E63946`)
- **Themes**: 6 light themes + 6 dark themes
- **Tokens**: HSL variables trong CSS, mapped qua Tailwind

### shadcn-vue Components
- **Location**: `app/components/ui/`
- **Structure**: Mỗi component có folder riêng với `index.ts`
- **Customization**: Tokens qua CSS variables
- **Usage**: Auto-import, không cần import manual

---

## Internationalization (i18n)

### i18n Structure
```
i18n/locales/
├── common/               # Common translations
│   ├── en.yml           # English
│   ├── vi.yml           # Vietnamese
│   └── ja.yml           # Japanese
├── home/                 # Homepage translations
│   ├── en.yml
│   ├── vi.yml
│   └── ja.yml
└── tools/                # Tools page translations
    ├── en.yml
    ├── vi.yml
    └── ja.yml
```

### i18n Usage
```ts
// Component usage
const { t } = useI18n()

// Access translations
t('home.about.title')
t('home.about.teamMembers.0.name')
t('common.navigation.home')
```

### i18n Configuration
```ts
// nuxt.config.ts
i18n: {
  langDir: 'locales',
  locales: [
    { code: 'en', name: 'English', files: ['common/en.yml', 'home/en.yml', 'tools/en.yml'] },
    { code: 'vi', name: 'Vietnamese', files: ['common/vi.yml', 'home/vi.yml', 'tools/vi.yml'] },
    { code: 'ja', name: 'Japanese', files: ['common/ja.yml', 'home/ja.yml', 'tools/ja.yml'] },
  ],
  defaultLocale: 'en',
}
```

---

## Development Rules

### File Organization
- **Do**: Nhóm theo feature, trích xuất logic sang `app/composables/` hoặc `app/utils/`
- **Do**: Dùng `defineNuxtPlugin` để cấu hình libs và `provide` helpers
- **Do**: Ưu tiên route-level code splitting; lazy import components nặng
- **Don't**: Đặt ảnh nặng trong `app/assets/`; đặt vào `public/`
- **Don't**: Truy cập trực tiếp API server trong components; dùng server routes/services

### Component Rules
- **Naming**: PascalCase cho components, kebab-case cho files
- **Props**: camelCase, rõ ràng, có type definitions
- **Events**: kebab-case, descriptive names
- **Structure**: Theo Vue 3 Composition API với `<script setup>`

### Styling Rules
- **Colors**: Dùng semantic tokens, không hardcode
- **Classes**: Utility-first, hạn chế CSS custom
- **Responsive**: Mobile-first approach
- **Accessibility**: Focus states, contrast ratios, keyboard navigation

---

## Checklist thêm/sửa cấu trúc

### Trước khi thêm component:
- [ ] Đặt file đúng thư mục chuẩn Nuxt 4
- [ ] Tên component theo PascalCase
- [ ] Props và events rõ ràng
- [ ] TypeScript definitions đầy đủ

### Trước khi thêm plugin:
- [ ] Xác định `.client/.server` nếu cần
- [ ] Dùng tiền tố số cho thứ tự nạp
- [ ] Đăng ký trong `nuxt.config.ts` nếu subfolder

### Trước khi thêm styling:
- [ ] Cập nhật tokens/màu ở `app/assets/css/tailwind.css`
- [ ] Kiểm tra dark mode, focus và contrast
- [ ] Không hardcode colors, dùng semantic tokens

### Trước khi thêm i18n:
- [ ] Thêm translations cho cả 3 ngôn ngữ (vi, en, ja)
- [ ] Sử dụng đúng structure (common, home, tools)
- [ ] Test switching giữa các ngôn ngữ

---

## Best Practices

### Performance
- **Lazy Loading**: Components nặng, routes
- **Code Splitting**: Theo feature/route
- **Bundle Size**: Monitor và optimize
- **Images**: Optimize, lazy load

### Security
- **Input Validation**: Client-side validation
- **XSS Prevention**: Sanitize user input
- **CSRF Protection**: Use Nuxt built-in protection
- **Environment Variables**: Không expose sensitive data

### Accessibility
- **Semantic HTML**: Proper HTML structure
- **ARIA Labels**: Screen reader support
- **Keyboard Navigation**: Full keyboard support
- **Color Contrast**: WCAG AA compliance

### Maintainability
- **Consistent Naming**: Follow conventions
- **Documentation**: Clear comments khi cần
- **Type Safety**: Full TypeScript coverage
- **Testing**: Unit tests cho logic phức tạp
